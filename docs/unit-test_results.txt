?   	api-tool/cmd/api-tool	[no test files]
=== RUN   TestAppRunner_Run_Help
=== RUN   TestAppRunner_Run_Help/Help_Flag_Long
=== RUN   TestAppRunner_Run_Help/Help_Flag_Short
=== RUN   TestAppRunner_Run_Help/No_Args
--- PASS: TestAppRunner_Run_Help (0.00s)
    --- PASS: TestAppRunner_Run_Help/Help_Flag_Long (0.00s)
    --- PASS: TestAppRunner_Run_Help/Help_Flag_Short (0.00s)
    --- PASS: TestAppRunner_Run_Help/No_Args (0.00s)
=== RUN   TestAppRunner_Run_FlagErrors
=== RUN   TestAppRunner_Run_FlagErrors/Invalid_Flag
=== RUN   TestAppRunner_Run_FlagErrors/Flag_Needs_Argument
--- PASS: TestAppRunner_Run_FlagErrors (0.00s)
    --- PASS: TestAppRunner_Run_FlagErrors/Invalid_Flag (0.00s)
    --- PASS: TestAppRunner_Run_FlagErrors/Flag_Needs_Argument (0.00s)
=== RUN   TestAppRunner_Run_ConfigErrors
=== RUN   TestAppRunner_Run_ConfigErrors/Config_Not_Found
2025/04/08 16:21:54.612959 [ERROR] Configuration file 'nonexistent.yaml' not found.
=== RUN   TestAppRunner_Run_ConfigErrors/Config_Load_Error
2025/04/08 16:21:54.613399 [ERROR] Error loading configuration '/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestAppRunner_Run_ConfigErrorsConfig_Load_Error4174135635/001/test_config.yaml': mock yaml parse error
--- PASS: TestAppRunner_Run_ConfigErrors (0.00s)
    --- PASS: TestAppRunner_Run_ConfigErrors/Config_Not_Found (0.00s)
    --- PASS: TestAppRunner_Run_ConfigErrors/Config_Load_Error (0.00s)
=== RUN   TestAppRunner_Run_ModeDispatch
=== RUN   TestAppRunner_Run_ModeDispatch/Single_Mode_-_Missing_API
2025/04/08 16:21:54.613849 [ERROR] Error: -api and -endpoint are required in single request mode.
=== RUN   TestAppRunner_Run_ModeDispatch/Single_Mode_-_Missing_Endpoint
2025/04/08 16:21:54.613879 [ERROR] Error: -api and -endpoint are required in single request mode.
=== RUN   TestAppRunner_Run_ModeDispatch/Single_Mode_-_Success
{"result":"success"}
=== RUN   TestAppRunner_Run_ModeDispatch/Single_Mode_-_Execution_Fails_(DNS)
2025/04/08 16:21:54.614183 [ERROR] Request execution failed: request execution failed: Get "http://test.com/path": dial tcp: lookup test.com: no such host
=== RUN   TestAppRunner_Run_ModeDispatch/Chain_Mode_-_Success_Path
=== RUN   TestAppRunner_Run_ModeDispatch/Chain_Mode_-_Runner_Fails
2025/04/08 16:21:54.614365 [ERROR] Chain execution failed: chain failed
=== RUN   TestAppRunner_Run_ModeDispatch/Chain_Mode_-_Config_Missing_Chain_Section
--- PASS: TestAppRunner_Run_ModeDispatch (0.00s)
    --- PASS: TestAppRunner_Run_ModeDispatch/Single_Mode_-_Missing_API (0.00s)
    --- PASS: TestAppRunner_Run_ModeDispatch/Single_Mode_-_Missing_Endpoint (0.00s)
    --- PASS: TestAppRunner_Run_ModeDispatch/Single_Mode_-_Success (0.00s)
    --- PASS: TestAppRunner_Run_ModeDispatch/Single_Mode_-_Execution_Fails_(DNS) (0.00s)
    --- PASS: TestAppRunner_Run_ModeDispatch/Chain_Mode_-_Success_Path (0.00s)
    --- PASS: TestAppRunner_Run_ModeDispatch/Chain_Mode_-_Runner_Fails (0.00s)
    --- PASS: TestAppRunner_Run_ModeDispatch/Chain_Mode_-_Config_Missing_Chain_Section (0.00s)
=== RUN   TestAppRunner_Run_Single_InitialPaginationParams
2025/04/08 16:21:54.614926 [INFO]  Forcing initial pagination parameters for GET http://test.com/offset
2025/04/08 16:21:54.614959 [INFO]  Handling 'offset' pagination...
[]
2025/04/08 16:21:54.615040 [INFO]  Handling 'page' pagination...
[]
--- PASS: TestAppRunner_Run_Single_InitialPaginationParams (0.00s)
PASS
ok  	api-tool/internal/app	0.342s
=== RUN   TestApplyAuthHeaders
=== RUN   TestApplyAuthHeaders/None
=== RUN   TestApplyAuthHeaders/API_Key
=== RUN   TestApplyAuthHeaders/API_Key_Env_Expand
=== RUN   TestApplyAuthHeaders/API_Key_Missing_Cred
=== RUN   TestApplyAuthHeaders/Bearer_From_Arg
=== RUN   TestApplyAuthHeaders/Bearer_Missing_Token
=== RUN   TestApplyAuthHeaders/Basic
=== RUN   TestApplyAuthHeaders/Basic_Env_Expand
=== RUN   TestApplyAuthHeaders/Basic_Missing_User
=== RUN   TestApplyAuthHeaders/Basic_Missing_Pass
=== RUN   TestApplyAuthHeaders/NTLM_(Sets_Basic)
=== RUN   TestApplyAuthHeaders/NTLM_Missing_Creds
=== RUN   TestApplyAuthHeaders/Digest_(No_Headers_Applied)
=== RUN   TestApplyAuthHeaders/OAuth2_(No_Headers_Applied)
=== RUN   TestApplyAuthHeaders/Unsupported_Type
--- PASS: TestApplyAuthHeaders (0.00s)
    --- PASS: TestApplyAuthHeaders/None (0.00s)
    --- PASS: TestApplyAuthHeaders/API_Key (0.00s)
    --- PASS: TestApplyAuthHeaders/API_Key_Env_Expand (0.00s)
    --- PASS: TestApplyAuthHeaders/API_Key_Missing_Cred (0.00s)
    --- PASS: TestApplyAuthHeaders/Bearer_From_Arg (0.00s)
    --- PASS: TestApplyAuthHeaders/Bearer_Missing_Token (0.00s)
    --- PASS: TestApplyAuthHeaders/Basic (0.00s)
    --- PASS: TestApplyAuthHeaders/Basic_Env_Expand (0.00s)
    --- PASS: TestApplyAuthHeaders/Basic_Missing_User (0.00s)
    --- PASS: TestApplyAuthHeaders/Basic_Missing_Pass (0.00s)
    --- PASS: TestApplyAuthHeaders/NTLM_(Sets_Basic) (0.00s)
    --- PASS: TestApplyAuthHeaders/NTLM_Missing_Creds (0.00s)
    --- PASS: TestApplyAuthHeaders/Digest_(No_Headers_Applied) (0.00s)
    --- PASS: TestApplyAuthHeaders/OAuth2_(No_Headers_Applied) (0.00s)
    --- PASS: TestApplyAuthHeaders/Unsupported_Type (0.00s)
=== RUN   TestGetAPIToken
=== RUN   TestGetAPIToken/Token_Set
=== RUN   TestGetAPIToken/Token_Not_Set
--- PASS: TestGetAPIToken (0.00s)
    --- PASS: TestGetAPIToken/Token_Set (0.00s)
    --- PASS: TestGetAPIToken/Token_Not_Set (0.00s)
=== RUN   TestNeedsCredentials
=== RUN   TestNeedsCredentials/none
=== RUN   TestNeedsCredentials/api_key
=== RUN   TestNeedsCredentials/bearer
=== RUN   TestNeedsCredentials/basic
=== RUN   TestNeedsCredentials/ntlm
=== RUN   TestNeedsCredentials/digest
=== RUN   TestNeedsCredentials/oauth2
=== RUN   TestNeedsCredentials/unknown
--- PASS: TestNeedsCredentials (0.00s)
    --- PASS: TestNeedsCredentials/none (0.00s)
    --- PASS: TestNeedsCredentials/api_key (0.00s)
    --- PASS: TestNeedsCredentials/bearer (0.00s)
    --- PASS: TestNeedsCredentials/basic (0.00s)
    --- PASS: TestNeedsCredentials/ntlm (0.00s)
    --- PASS: TestNeedsCredentials/digest (0.00s)
    --- PASS: TestNeedsCredentials/oauth2 (0.00s)
    --- PASS: TestNeedsCredentials/unknown (0.00s)
=== RUN   TestDigestAuthRoundTripper_Success_MD5
2025/04/08 16:21:54.437802 [INFO]  Digest RT: Selected Algorithm: MD5, QOP: auth (FIPS Mode: false)
--- PASS: TestDigestAuthRoundTripper_Success_MD5 (0.00s)
=== RUN   TestDigestAuthRoundTripper_Success_SHA256_Preferred
2025/04/08 16:21:54.437937 [INFO]  Digest RT: Selected Algorithm: SHA-256, QOP: auth-int (FIPS Mode: false)
--- PASS: TestDigestAuthRoundTripper_Success_SHA256_Preferred (0.00s)
=== RUN   TestDigestAuthRoundTripper_FIPS_Mode_Fail_MD5_Only
--- PASS: TestDigestAuthRoundTripper_FIPS_Mode_Fail_MD5_Only (0.00s)
=== RUN   TestDigestAuthRoundTripper_FIPS_Mode_Success_SHA256_Offered
2025/04/08 16:21:54.437976 [INFO]  Digest RT: Selected Algorithm: SHA-256, QOP: auth (FIPS Mode: true)
--- PASS: TestDigestAuthRoundTripper_FIPS_Mode_Success_SHA256_Offered (0.00s)
=== RUN   TestDigestAuthRoundTripper_Fail_No_Supported_Algo
--- PASS: TestDigestAuthRoundTripper_Fail_No_Supported_Algo (0.00s)
=== RUN   TestDigestAuthRoundTripper_AuthInt_With_Body
2025/04/08 16:21:54.438013 [INFO]  Digest RT: Selected Algorithm: MD5, QOP: auth-int (FIPS Mode: false)
--- PASS: TestDigestAuthRoundTripper_AuthInt_With_Body (0.00s)
=== RUN   TestDigestAuthRoundTripper_Non401
--- PASS: TestDigestAuthRoundTripper_Non401 (0.00s)
=== RUN   TestDigestAuthRoundTripper_401NotDigest
--- PASS: TestDigestAuthRoundTripper_401NotDigest (0.00s)
=== RUN   TestDigestAuthRoundTripper_ErrorOnFirstRequest
--- PASS: TestDigestAuthRoundTripper_ErrorOnFirstRequest (0.00s)
=== RUN   TestDigestAuthRoundTripper_ErrorOnSecondRequest
2025/04/08 16:21:54.438076 [INFO]  Digest RT: Selected Algorithm: MD5, QOP: auth (FIPS Mode: false)
--- PASS: TestDigestAuthRoundTripper_ErrorOnSecondRequest (0.00s)
PASS
ok  	api-tool/internal/auth	0.165s
=== RUN   TestRunner_Run_SimpleRequestStep_NoRegression
2025/04/08 16:21:54.932122 [DEBUG] Log level set to 4
2025/04/08 16:21:54.932576 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.932584 [INFO]  Executing Step: fetch_data
2025/04/08 16:21:54.932670 [DEBUG] Step 'fetch_data': Auto-detected Content-Type: application/json
2025/04/08 16:21:54.932895 [DEBUG] Step 'fetch_data': Sending GET http://api.test/data
2025/04/08 16:21:54.933052 [INFO]  Step 'fetch_data': Extracted Variable 'RESULT_BODY' = '{"id": 123}' (from Body JQ)
2025/04/08 16:21:54.933056 [INFO]  Chain execution completed.
--- PASS: TestRunner_Run_SimpleRequestStep_NoRegression (0.00s)
=== RUN   TestRunner_Run_FileHandlingSteps
=== RUN   TestRunner_Run_FileHandlingSteps/Raw_File_Upload_Success
2025/04/08 16:21:54.933468 [DEBUG] Log level set to 4
2025/04/08 16:21:54.933601 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 DL_SUBDIR:results HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners STEP_ID:step1 TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.933605 [INFO]  Executing Step: raw_upload
2025/04/08 16:21:54.933651 [DEBUG] Step 'raw_upload': Uploading body from file: /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/upload.bin
2025/04/08 16:21:54.933750 [DEBUG] Step 'raw_upload': Sending PUT http://file.test/upload
2025/04/08 16:21:54.933838 [INFO]  Chain execution completed.
=== RUN   TestRunner_Run_FileHandlingSteps/Raw_File_Upload_File_Not_Found
2025/04/08 16:21:54.933899 [DEBUG] Log level set to 4
2025/04/08 16:21:54.933941 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 DL_SUBDIR:results HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners STEP_ID:step1 TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.933945 [INFO]  Executing Step: raw_upload_fail
2025/04/08 16:21:54.933971 [DEBUG] Step 'raw_upload_fail': Uploading body from file: nonexistent.file
=== RUN   TestRunner_Run_FileHandlingSteps/Multipart_Upload_Success
2025/04/08 16:21:54.934035 [DEBUG] Log level set to 4
2025/04/08 16:21:54.934103 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 DL_SUBDIR:results HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners STEP_ID:step1 TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.934106 [INFO]  Executing Step: multipart_upload
2025/04/08 16:21:54.934123 [DEBUG] Step 'multipart_upload': Preparing multipart form data
2025/04/08 16:21:54.934230 [DEBUG] Step 'multipart_upload': Added multipart file 'data.txt' from path '/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/data.txt' as field 'file1'
2025/04/08 16:21:54.934264 [DEBUG] Step 'multipart_upload': Added multipart file 'upload.bin' from path '/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/upload.bin' as field 'meta'
2025/04/08 16:21:54.934312 [DEBUG] Step 'multipart_upload': Sending POST http://file.test/upload
2025/04/08 16:21:54.934354 [INFO]  Chain execution completed.
=== RUN   TestRunner_Run_FileHandlingSteps/Download_Success
2025/04/08 16:21:54.934448 [DEBUG] Log level set to 4
2025/04/08 16:21:54.934506 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 DL_SUBDIR:results HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners STEP_ID:step1 TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.934508 [INFO]  Executing Step: download_ok
2025/04/08 16:21:54.934620 [DEBUG] Step 'download_ok': Sending GET http://file.test/upload
2025/04/08 16:21:54.934662 [INFO]  Step 'download_ok': Downloading (Status 200) to: /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/downloaded_response.zip
2025/04/08 16:21:54.934689 [INFO]  Step 'download_ok': Downloaded 30 bytes to /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/downloaded_response.zip
2025/04/08 16:21:54.934691 [INFO]  Chain execution completed.
=== RUN   TestRunner_Run_FileHandlingSteps/Download_Success_with_Templated_Path
2025/04/08 16:21:54.934754 [DEBUG] Log level set to 4
2025/04/08 16:21:54.934807 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 DL_SUBDIR:results HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners STEP_ID:step1 TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.934809 [INFO]  Executing Step: download_template
2025/04/08 16:21:54.934860 [DEBUG] Step 'download_template': Sending GET http://file.test/upload
2025/04/08 16:21:54.934912 [INFO]  Step 'download_template': Downloading (Status 200) to: /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/download_step1.out
2025/04/08 16:21:54.934943 [INFO]  Step 'download_template': Downloaded 30 bytes to /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/download_step1.out
2025/04/08 16:21:54.934946 [INFO]  Chain execution completed.
=== RUN   TestRunner_Run_FileHandlingSteps/Download_Success_with_Env_Var_Path
2025/04/08 16:21:54.935013 [DEBUG] Log level set to 4
2025/04/08 16:21:54.935066 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 DL_SUBDIR:results HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners STEP_ID:step1 TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.935069 [INFO]  Executing Step: download_env
2025/04/08 16:21:54.935122 [DEBUG] Step 'download_env': Sending GET http://file.test/upload
2025/04/08 16:21:54.935164 [INFO]  Step 'download_env': Downloading (Status 200) to: /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/results/file.out
2025/04/08 16:21:54.935192 [INFO]  Step 'download_env': Downloaded 30 bytes to /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/results/file.out
2025/04/08 16:21:54.935194 [INFO]  Chain execution completed.
=== RUN   TestRunner_Run_FileHandlingSteps/Download_Fails_During_Write_(WriteFile_Error)
2025/04/08 16:21:54.935253 [DEBUG] Log level set to 4
2025/04/08 16:21:54.935315 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 DL_SUBDIR:results HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners STEP_ID:step1 TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.935318 [INFO]  Executing Step: download_fail_write
2025/04/08 16:21:54.935379 [DEBUG] Step 'download_fail_write': Sending GET http://file.test/upload
2025/04/08 16:21:54.935422 [INFO]  Step 'download_fail_write': Downloading (Status 200) to: /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/downloaded_response.zip
=== RUN   TestRunner_Run_FileHandlingSteps/Download_with_Header_Extraction_Only
2025/04/08 16:21:54.935511 [DEBUG] Log level set to 4
2025/04/08 16:21:54.935583 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 DL_SUBDIR:results HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners STEP_ID:step1 TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.935587 [INFO]  Executing Step: download_extract_header
2025/04/08 16:21:54.935649 [DEBUG] Step 'download_extract_header': Sending GET http://file.test/upload
2025/04/08 16:21:54.935692 [INFO]  Step 'download_extract_header': Downloading (Status 200) to: /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/downloaded_response.zip
2025/04/08 16:21:54.935717 [INFO]  Step 'download_extract_header': Downloaded 30 bytes to /var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/TestRunner_Run_FileHandlingSteps720430816/001/downloaded_response.zip
2025/04/08 16:21:54.935723 [INFO]  Step 'download_extract_header': Extracted Variable 'ETAG' = '"abc-123"' (from Header)
2025/04/08 16:21:54.935737 [INFO]  Chain execution completed.
--- PASS: TestRunner_Run_FileHandlingSteps (0.00s)
    --- PASS: TestRunner_Run_FileHandlingSteps/Raw_File_Upload_Success (0.00s)
    --- PASS: TestRunner_Run_FileHandlingSteps/Raw_File_Upload_File_Not_Found (0.00s)
    --- PASS: TestRunner_Run_FileHandlingSteps/Multipart_Upload_Success (0.00s)
    --- PASS: TestRunner_Run_FileHandlingSteps/Download_Success (0.00s)
    --- PASS: TestRunner_Run_FileHandlingSteps/Download_Success_with_Templated_Path (0.00s)
    --- PASS: TestRunner_Run_FileHandlingSteps/Download_Success_with_Env_Var_Path (0.00s)
    --- PASS: TestRunner_Run_FileHandlingSteps/Download_Fails_During_Write_(WriteFile_Error) (0.00s)
    --- PASS: TestRunner_Run_FileHandlingSteps/Download_with_Header_Extraction_Only (0.00s)
=== RUN   TestRunner_Run_InitialPaginationParams
2025/04/08 16:21:54.936206 [DEBUG] Log level set to 4
2025/04/08 16:21:54.936337 [DEBUG] Initial State: map[BASH_SILENCE_DEPRECATION_WARNING:1 COLORTERM:truecolor COMMAND_MODE:unix2003 HOME:/Users/moosifer HOMEBREW_CELLAR:/opt/homebrew/Cellar HOMEBREW_PREFIX:/opt/homebrew HOMEBREW_REPOSITORY:/opt/homebrew INFOPATH:/opt/homebrew/share/info: LANG:en_US.UTF-8 LOGNAME:moosifer MallocNanoZone:0 OLDPWD:/Users/moosifer/projects/etl-tool ORIGINAL_XDG_CURRENT_DESKTOP:undefined PATH:/usr/local/go/bin:/Users/moosifer/.pyenv/shims:/Users/moosifer/.pyenv/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/go/bin:/Users/moosifer/.local/bin PWD:/Users/moosifer/projects/api-tool/internal/chain PYENV_ROOT:/Users/moosifer/.pyenv PYENV_SHELL:bash SHELL:/bin/bash SHLVL:1 SSH_AUTH_SOCK:/private/tmp/com.apple.launchd.sE2PR3vFVp/Listeners TERM:xterm-256color TERM_PROGRAM:Hyper TERM_PROGRAM_VERSION:3.4.1 TMPDIR:/var/folders/8y/q4hdckn15ml2zt1l9d2x9f600000gn/T/ USER:moosifer XPC_FLAGS:0x0 XPC_SERVICE_NAME:0 _:/usr/local/go/bin/go __CFBundleIdentifier:co.zeit.hyper __CF_USER_TEXT_ENCODING:0x1F5:0x0:0x0]
2025/04/08 16:21:54.936341 [INFO]  Executing Step: fetch_forced
2025/04/08 16:21:54.936373 [INFO]  Step 'fetch_forced': Forcing initial pagination parameters for GET http://api.test/data
2025/04/08 16:21:54.936466 [DEBUG] Pagination (Query): Constructed next URL: http://api.test/data?count=10&start=0
2025/04/08 16:21:54.936469 [DEBUG] Step 'fetch_forced': Request modified for initial pagination params. New URL: http://api.test/data?count=10&start=0
2025/04/08 16:21:54.936739 [DEBUG] Step 'fetch_forced': Sending GET http://api.test/data?count=10&start=0
2025/04/08 16:21:54.936853 [INFO]  Step 'fetch_forced': Handling 'offset' pagination...
2025/04/08 16:21:54.936929 [INFO]  Chain execution completed.
--- PASS: TestRunner_Run_InitialPaginationParams (0.00s)
=== RUN   TestState_SetGet
--- PASS: TestState_SetGet (0.00s)
=== RUN   TestState_GetAll
--- PASS: TestState_GetAll (0.00s)
=== RUN   TestState_MergeMap
--- PASS: TestState_MergeMap (0.00s)
=== RUN   TestState_MergeOSEnv
--- PASS: TestState_MergeOSEnv (0.00s)
PASS
ok  	api-tool/internal/chain	0.610s
=== RUN   TestLoadConfig_ValidCases
=== RUN   TestLoadConfig_ValidCases/Minimal_Valid_Config
=== RUN   TestLoadConfig_ValidCases/Config_with_Chain
=== RUN   TestLoadConfig_ValidCases/Config_with_Defaults_Applied
--- PASS: TestLoadConfig_ValidCases (0.00s)
    --- PASS: TestLoadConfig_ValidCases/Minimal_Valid_Config (0.00s)
    --- PASS: TestLoadConfig_ValidCases/Config_with_Chain (0.00s)
    --- PASS: TestLoadConfig_ValidCases/Config_with_Defaults_Applied (0.00s)
=== RUN   TestLoadConfig_ErrorCases
=== RUN   TestLoadConfig_ErrorCases/File_Not_Found
=== RUN   TestLoadConfig_ErrorCases/Invalid_YAML_Syntax
=== RUN   TestLoadConfig_ErrorCases/Empty_File
--- PASS: TestLoadConfig_ErrorCases (0.00s)
    --- PASS: TestLoadConfig_ErrorCases/File_Not_Found (0.00s)
    --- PASS: TestLoadConfig_ErrorCases/Invalid_YAML_Syntax (0.00s)
    --- PASS: TestLoadConfig_ErrorCases/Empty_File (0.00s)
=== RUN   TestLoadConfig_ValidationErrors
=== RUN   TestLoadConfig_ValidationErrors/Missing_Required_Top-Level_Keys
=== RUN   TestLoadConfig_ValidationErrors/Invalid_API_Structure
=== RUN   TestLoadConfig_ValidationErrors/Invalid_Endpoint_Structure
=== RUN   TestLoadConfig_ValidationErrors/Invalid_URL
=== RUN   TestLoadConfig_ValidationErrors/Invalid_Log_Level
=== RUN   TestLoadConfig_ValidationErrors/Invalid_Chain_Step_Reference_API
=== RUN   TestLoadConfig_ValidationErrors/Invalid_Chain_Step_Reference_Endpoint
=== RUN   TestLoadConfig_ValidationErrors/Invalid_Pagination_Config
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Body_Mutual_Exclusivity_-_Data_vs_Upload
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Body_Mutual_Exclusivity_-_Upload_vs_Multipart
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Body_Mutual_Exclusivity_-_Data_vs_Multipart_Files
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Body_Mutual_Exclusivity_-_All_Three
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Download_vs_Body_Extract_Conflict
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Download_with_Only_Header_Extract_(Valid)
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Upload_with_GET_(Validation_Error)
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Multipart_with_GET_(Validation_Error)
=== RUN   TestLoadConfig_ValidationErrors/Chain_Request_Download_with_POST_(Validation_Error)
--- PASS: TestLoadConfig_ValidationErrors (0.01s)
    --- PASS: TestLoadConfig_ValidationErrors/Missing_Required_Top-Level_Keys (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Invalid_API_Structure (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Invalid_Endpoint_Structure (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Invalid_URL (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Invalid_Log_Level (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Invalid_Chain_Step_Reference_API (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Invalid_Chain_Step_Reference_Endpoint (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Invalid_Pagination_Config (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Body_Mutual_Exclusivity_-_Data_vs_Upload (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Body_Mutual_Exclusivity_-_Upload_vs_Multipart (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Body_Mutual_Exclusivity_-_Data_vs_Multipart_Files (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Body_Mutual_Exclusivity_-_All_Three (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Download_vs_Body_Extract_Conflict (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Download_with_Only_Header_Extract_(Valid) (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Upload_with_GET_(Validation_Error) (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Multipart_with_GET_(Validation_Error) (0.00s)
    --- PASS: TestLoadConfig_ValidationErrors/Chain_Request_Download_with_POST_(Validation_Error) (0.00s)
PASS
ok  	api-tool/internal/config	0.437s
=== RUN   TestExecuteRequest_RetryLogic
2025/04/08 16:21:55.232856 [DEBUG] Log level set to 4
=== RUN   TestExecuteRequest_RetryLogic/Success_First_Try
2025/04/08 16:21:55.233220 [DEBUG] Request attempt 1/3 for GET http://retry.test/data
2025/04/08 16:21:55.233415 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
=== RUN   TestExecuteRequest_RetryLogic/Retry_on_503_then_Success
2025/04/08 16:21:55.233532 [DEBUG] Request attempt 1/3 for GET http://retry.test/data
2025/04/08 16:21:55.233552 [INFO]  Attempt 1 failed: received retryable status code 503
2025/04/08 16:21:55.233559 [INFO]  Retrying in 1s...
2025/04/08 16:21:55.233562 [DEBUG] Request attempt 2/3 for GET http://retry.test/data
2025/04/08 16:21:55.233565 [DEBUG] Attempt 2 successful with status 200 or non-retryable error.
=== RUN   TestExecuteRequest_RetryLogic/Retry_on_500_Hits_Max_Attempts
2025/04/08 16:21:55.233599 [DEBUG] Request attempt 1/3 for GET http://retry.test/data
2025/04/08 16:21:55.233612 [INFO]  Attempt 1 failed: received retryable status code 500
2025/04/08 16:21:55.233616 [INFO]  Retrying in 1s...
2025/04/08 16:21:55.233618 [DEBUG] Request attempt 2/3 for GET http://retry.test/data
2025/04/08 16:21:55.233622 [INFO]  Attempt 2 failed: received retryable status code 500
2025/04/08 16:21:55.233624 [INFO]  Retrying in 1s...
2025/04/08 16:21:55.233626 [DEBUG] Request attempt 3/3 for GET http://retry.test/data
2025/04/08 16:21:55.233629 [INFO]  Attempt 3 failed: received retryable status code 500
=== RUN   TestExecuteRequest_RetryLogic/No_Retry_on_Excluded_Code_400
2025/04/08 16:21:55.233660 [DEBUG] Request attempt 1/3 for GET http://retry.test/data
2025/04/08 16:21:55.233670 [DEBUG] Attempt 1 successful with status 400 or non-retryable error.
=== RUN   TestExecuteRequest_RetryLogic/No_Retry_on_Excluded_Code_404
2025/04/08 16:21:55.233700 [DEBUG] Request attempt 1/3 for GET http://retry.test/data
2025/04/08 16:21:55.233711 [DEBUG] Attempt 1 successful with status 404 or non-retryable error.
=== RUN   TestExecuteRequest_RetryLogic/Retry_on_Network_Error_then_Success
2025/04/08 16:21:55.233752 [DEBUG] Request attempt 1/3 for GET http://retry.test/data
2025/04/08 16:21:55.233799 [INFO]  Attempt 1 failed: Get "http://retry.test/data": connection refused
2025/04/08 16:21:55.233807 [INFO]  Retrying in 1s...
2025/04/08 16:21:55.233810 [DEBUG] Request attempt 2/3 for GET http://retry.test/data
2025/04/08 16:21:55.233815 [DEBUG] Attempt 2 successful with status 200 or non-retryable error.
=== RUN   TestExecuteRequest_RetryLogic/Retry_on_Network_Error_Hits_Max_Attempts
2025/04/08 16:21:55.233876 [DEBUG] Request attempt 1/3 for GET http://retry.test/data
2025/04/08 16:21:55.233893 [INFO]  Attempt 1 failed: Get "http://retry.test/data": net err 1
2025/04/08 16:21:55.233898 [INFO]  Retrying in 1s...
2025/04/08 16:21:55.233900 [DEBUG] Request attempt 2/3 for GET http://retry.test/data
2025/04/08 16:21:55.233908 [INFO]  Attempt 2 failed: Get "http://retry.test/data": net err 2
2025/04/08 16:21:55.233912 [INFO]  Retrying in 1s...
2025/04/08 16:21:55.233914 [DEBUG] Request attempt 3/3 for GET http://retry.test/data
2025/04/08 16:21:55.233918 [INFO]  Attempt 3 failed: Get "http://retry.test/data": net err 3
=== RUN   TestExecuteRequest_RetryLogic/POST_Request_Body_Resent_on_Retry
2025/04/08 16:21:55.233985 [DEBUG] Request attempt 1/3 for POST http://retry.test/data
2025/04/08 16:21:55.234003 [INFO]  Attempt 1 failed: received retryable status code 500
2025/04/08 16:21:55.234010 [INFO]  Retrying in 1s...
2025/04/08 16:21:55.234013 [DEBUG] Request attempt 2/3 for POST http://retry.test/data
2025/04/08 16:21:55.234017 [DEBUG] Attempt 2 successful with status 200 or non-retryable error.
=== RUN   TestExecuteRequest_RetryLogic/Zero_Max_Attempts_(Effectively_1)
2025/04/08 16:21:55.234073 [INFO]  Attempt 1 failed: received retryable status code 500
--- PASS: TestExecuteRequest_RetryLogic (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/Success_First_Try (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/Retry_on_503_then_Success (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/Retry_on_500_Hits_Max_Attempts (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/No_Retry_on_Excluded_Code_400 (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/No_Retry_on_Excluded_Code_404 (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/Retry_on_Network_Error_then_Success (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/Retry_on_Network_Error_Hits_Max_Attempts (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/POST_Request_Body_Resent_on_Retry (0.00s)
    --- PASS: TestExecuteRequest_RetryLogic/Zero_Max_Attempts_(Effectively_1) (0.00s)
=== RUN   TestExtractHeaderValue
=== RUN   TestExtractHeaderValue/Simple_Match
=== RUN   TestExtractHeaderValue/Match_Mime_Type
=== RUN   TestExtractHeaderValue/Match_Charset
=== RUN   TestExtractHeaderValue/Link_Header_Next_URL
=== RUN   TestExtractHeaderValue/Request_ID
=== RUN   TestExtractHeaderValue/Header_Not_Found
=== RUN   TestExtractHeaderValue/Regex_No_Match
=== RUN   TestExtractHeaderValue/Regex_No_Capture_Group
=== RUN   TestExtractHeaderValue/Invalid_Regex
=== RUN   TestExtractHeaderValue/Invalid_Format_No_Regex
=== RUN   TestExtractHeaderValue/Invalid_Format_No_Header_Name
=== RUN   TestExtractHeaderValue/Invalid_Format_No_Header_Prefix
=== RUN   TestExtractHeaderValue/Empty_Header_Value_Match
=== RUN   TestExtractHeaderValue/Empty_Header_Value_No_Match
--- PASS: TestExtractHeaderValue (0.00s)
    --- PASS: TestExtractHeaderValue/Simple_Match (0.00s)
    --- PASS: TestExtractHeaderValue/Match_Mime_Type (0.00s)
    --- PASS: TestExtractHeaderValue/Match_Charset (0.00s)
    --- PASS: TestExtractHeaderValue/Link_Header_Next_URL (0.00s)
    --- PASS: TestExtractHeaderValue/Request_ID (0.00s)
    --- PASS: TestExtractHeaderValue/Header_Not_Found (0.00s)
    --- PASS: TestExtractHeaderValue/Regex_No_Match (0.00s)
    --- PASS: TestExtractHeaderValue/Regex_No_Capture_Group (0.00s)
    --- PASS: TestExtractHeaderValue/Invalid_Regex (0.00s)
    --- PASS: TestExtractHeaderValue/Invalid_Format_No_Regex (0.00s)
    --- PASS: TestExtractHeaderValue/Invalid_Format_No_Header_Name (0.00s)
    --- PASS: TestExtractHeaderValue/Invalid_Format_No_Header_Prefix (0.00s)
    --- PASS: TestExtractHeaderValue/Empty_Header_Value_Match (0.00s)
    --- PASS: TestExtractHeaderValue/Empty_Header_Value_No_Match (0.00s)
=== RUN   TestHandleOffsetOrPagePagination
2025/04/08 16:21:55.234551 [DEBUG] Log level set to 4
=== RUN   TestHandleOffsetOrPagePagination/Offset_Stop_By_Total
2025/04/08 16:21:55.234641 [INFO]  Pagination type 'offset' detected. Starting pagination handling...
2025/04/08 16:21:55.234722 [DEBUG] Pagination: Extracted 2 items on page 1 (index 0). Total so far: 2
2025/04/08 16:21:55.234728 [DEBUG] Pagination: Found total records 3 from body field 'total'
2025/04/08 16:21:55.234730 [INFO]  Pagination: Preparing next page request. Next Offset=2, Next Page=0
2025/04/08 16:21:55.234739 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/items?skip=2&take=2
2025/04/08 16:21:55.234743 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.234746 [DEBUG] Pagination: Extracted 1 items on page 2 (index 1). Total so far: 3
2025/04/08 16:21:55.234761 [INFO]  Pagination: Collected items 3 >= known total 3. Stopping.
2025/04/08 16:21:55.234764 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleOffsetOrPagePagination/Page_Stop_By_Results_Less_Than_Limit
2025/04/08 16:21:55.234889 [INFO]  Pagination type 'page' detected. Starting pagination handling...
2025/04/08 16:21:55.234902 [DEBUG] Pagination: Extracted 2 items on page 1 (index 0). Total so far: 2
2025/04/08 16:21:55.234906 [INFO]  Pagination: Preparing next page request. Next Offset=2, Next Page=2
2025/04/08 16:21:55.234911 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/data?p=2&s=2
2025/04/08 16:21:55.234915 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.234917 [DEBUG] Pagination: Extracted 2 items on page 2 (index 1). Total so far: 4
2025/04/08 16:21:55.234919 [INFO]  Pagination: Preparing next page request. Next Offset=4, Next Page=3
2025/04/08 16:21:55.234922 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/data?p=3&s=2
2025/04/08 16:21:55.234924 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.234927 [DEBUG] Pagination: Extracted 1 items on page 3 (index 2). Total so far: 5
2025/04/08 16:21:55.234928 [INFO]  Pagination: Received 1 items < limit 2, and total unknown. Assuming end. Stopping.
2025/04/08 16:21:55.234930 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleOffsetOrPagePagination/Offset_in_POST_Body_Nested
2025/04/08 16:21:55.234988 [INFO]  Pagination type 'offset' detected. Starting pagination handling...
2025/04/08 16:21:55.235000 [DEBUG] Pagination: Extracted 2 items on page 1 (index 0). Total so far: 2
2025/04/08 16:21:55.235003 [DEBUG] Pagination: Found total records 3 from body field 'response.totalRecords'
2025/04/08 16:21:55.235004 [INFO]  Pagination: Preparing next page request. Next Offset=2, Next Page=0
2025/04/08 16:21:55.235064 [DEBUG] Pagination (Body): Updated body for path 'query.options': {"query":{"options":{"count":2,"startOffset":2},"tool":"details"},"type":"vuln"}
2025/04/08 16:21:55.235072 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235075 [DEBUG] Pagination: Extracted 1 items on page 2 (index 1). Total so far: 3
2025/04/08 16:21:55.235077 [INFO]  Pagination: Collected items 3 >= known total 3. Stopping.
2025/04/08 16:21:55.235078 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleOffsetOrPagePagination/Offset_Error_on_Page_2
2025/04/08 16:21:55.235144 [INFO]  Pagination type 'offset' detected. Starting pagination handling...
2025/04/08 16:21:55.235153 [DEBUG] Pagination: Extracted 2 items on page 1 (index 0). Total so far: 2
2025/04/08 16:21:55.235156 [DEBUG] Pagination: Found total records 4 from body field 'total'
2025/04/08 16:21:55.235159 [INFO]  Pagination: Preparing next page request. Next Offset=2, Next Page=0
2025/04/08 16:21:55.235164 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/items?limit=2&offset=2
2025/04/08 16:21:55.235176 [INFO]  Attempt 1 failed: Get "http://test.com/items?limit=2&offset=2": network timeout
2025/04/08 16:21:55.235183 [ERROR] Pagination: Failed to fetch page (offset 2 / page 0): request failed after 1 attempts: request failed: Get "http://test.com/items?limit=2&offset=2": network timeout. Stopping.
2025/04/08 16:21:55.235185 [ERROR] Pagination failed: request failed after 1 attempts: request failed: Get "http://test.com/items?limit=2&offset=2": network timeout. Returning collected data if any.
=== RUN   TestHandleOffsetOrPagePagination/Offset_Stop_By_Empty_Results
2025/04/08 16:21:55.235263 [INFO]  Pagination type 'offset' detected. Starting pagination handling...
2025/04/08 16:21:55.235273 [DEBUG] Pagination: Extracted 2 items on page 1 (index 0). Total so far: 2
2025/04/08 16:21:55.235276 [INFO]  Pagination: Preparing next page request. Next Offset=2, Next Page=0
2025/04/08 16:21:55.235279 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/data?limit=5&offset=2
2025/04/08 16:21:55.235287 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235293 [DEBUG] Pagination: Extracted 0 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.235295 [INFO]  Pagination: Received 0 items < limit 5, and total unknown. Assuming end. Stopping.
2025/04/08 16:21:55.235297 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleOffsetOrPagePagination/Offset_Stop_By_Header_Total
2025/04/08 16:21:55.235346 [INFO]  Pagination type 'offset' detected. Starting pagination handling...
2025/04/08 16:21:55.235354 [DEBUG] Pagination: Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.235357 [DEBUG] Pagination: Found total records 2 from header 'X-Total'
2025/04/08 16:21:55.235358 [INFO]  Pagination: Preparing next page request. Next Offset=1, Next Page=0
2025/04/08 16:21:55.235362 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/items?skip=1&take=1
2025/04/08 16:21:55.235367 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235370 [DEBUG] Pagination: Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.235371 [INFO]  Pagination: Collected items 2 >= known total 2. Stopping.
2025/04/08 16:21:55.235383 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleOffsetOrPagePagination/Offset_Stop_By_MaxPages
2025/04/08 16:21:55.235433 [INFO]  Pagination type 'offset' detected. Starting pagination handling...
2025/04/08 16:21:55.235444 [DEBUG] Pagination: Extracted 2 items on page 1 (index 0). Total so far: 2
2025/04/08 16:21:55.235446 [INFO]  Pagination: Preparing next page request. Next Offset=2, Next Page=0
2025/04/08 16:21:55.235451 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/items?limit=2&offset=2
2025/04/08 16:21:55.235454 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235457 [DEBUG] Pagination: Extracted 2 items on page 2 (index 1). Total so far: 4
2025/04/08 16:21:55.235458 [INFO]  Pagination: Reached configured max_pages (2). Stopping.
2025/04/08 16:21:55.235460 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleOffsetOrPagePagination/Offset_MaxPages_Not_Hit_Due_To_Other_Stop
2025/04/08 16:21:55.235500 [INFO]  Pagination type 'offset' detected. Starting pagination handling...
2025/04/08 16:21:55.235508 [DEBUG] Pagination: Extracted 2 items on page 1 (index 0). Total so far: 2
2025/04/08 16:21:55.235510 [DEBUG] Pagination: Found total records 3 from body field 'total'
2025/04/08 16:21:55.235511 [INFO]  Pagination: Preparing next page request. Next Offset=2, Next Page=0
2025/04/08 16:21:55.235516 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/items?limit=2&offset=2
2025/04/08 16:21:55.235520 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235522 [DEBUG] Pagination: Extracted 1 items on page 2 (index 1). Total so far: 3
2025/04/08 16:21:55.235523 [INFO]  Pagination: Collected items 3 >= known total 3. Stopping.
2025/04/08 16:21:55.235525 [INFO]  Pagination finished. Returning merged results.
--- PASS: TestHandleOffsetOrPagePagination (0.00s)
    --- PASS: TestHandleOffsetOrPagePagination/Offset_Stop_By_Total (0.00s)
    --- PASS: TestHandleOffsetOrPagePagination/Page_Stop_By_Results_Less_Than_Limit (0.00s)
    --- PASS: TestHandleOffsetOrPagePagination/Offset_in_POST_Body_Nested (0.00s)
    --- PASS: TestHandleOffsetOrPagePagination/Offset_Error_on_Page_2 (0.00s)
    --- PASS: TestHandleOffsetOrPagePagination/Offset_Stop_By_Empty_Results (0.00s)
    --- PASS: TestHandleOffsetOrPagePagination/Offset_Stop_By_Header_Total (0.00s)
    --- PASS: TestHandleOffsetOrPagePagination/Offset_Stop_By_MaxPages (0.00s)
    --- PASS: TestHandleOffsetOrPagePagination/Offset_MaxPages_Not_Hit_Due_To_Other_Stop (0.00s)
=== RUN   TestHandleCursorPagination
2025/04/08 16:21:55.235562 [DEBUG] Log level set to 4
=== RUN   TestHandleCursorPagination/Cursor_in_Body_Field,_Query_Usage
2025/04/08 16:21:55.235619 [INFO]  Pagination type 'cursor' detected. Starting pagination handling...
2025/04/08 16:21:55.235652 [DEBUG] Pagination (Cursor): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.235657 [DEBUG] Pagination (Cursor): Found next cursor: cursorA
2025/04/08 16:21:55.235661 [DEBUG] Pagination (Cursor Query): Set param 'cursor=cursorA'. New URL: http://test.com/data?cursor=cursorA
2025/04/08 16:21:55.235664 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235666 [DEBUG] Pagination (Cursor): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.235668 [DEBUG] Pagination (Cursor): Found next cursor: cursorB
2025/04/08 16:21:55.235671 [DEBUG] Pagination (Cursor Query): Set param 'cursor=cursorB'. New URL: http://test.com/data?cursor=cursorB
2025/04/08 16:21:55.235673 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235675 [DEBUG] Pagination (Cursor): Extracted 1 items on page 3 (index 2). Total so far: 3
2025/04/08 16:21:55.235677 [INFO]  Pagination (Cursor): No next cursor found. Stopping.
2025/04/08 16:21:55.235679 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleCursorPagination/Cursor_in_Header,_Query_Usage_Custom_Param
2025/04/08 16:21:55.235726 [INFO]  Pagination type 'cursor' detected. Starting pagination handling...
2025/04/08 16:21:55.235746 [DEBUG] Pagination (Cursor): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.235751 [DEBUG] Pagination (Cursor): Found next cursor: tok1
2025/04/08 16:21:55.235755 [DEBUG] Pagination (Cursor Query): Set param 'next_token=tok1'. New URL: http://test.com/results?next_token=tok1
2025/04/08 16:21:55.235761 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235764 [DEBUG] Pagination (Cursor): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.235766 [DEBUG] Pagination (Cursor): Found next cursor: tok2
2025/04/08 16:21:55.235769 [DEBUG] Pagination (Cursor Query): Set param 'next_token=tok2'. New URL: http://test.com/results?next_token=tok2
2025/04/08 16:21:55.235772 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235774 [DEBUG] Pagination (Cursor): Extracted 1 items on page 3 (index 2). Total so far: 3
2025/04/08 16:21:55.235785 [INFO]  Pagination (Cursor): No next cursor found. Stopping.
2025/04/08 16:21:55.235789 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleCursorPagination/Cursor_is_Full_URL
2025/04/08 16:21:55.235843 [INFO]  Pagination type 'cursor' detected. Starting pagination handling...
2025/04/08 16:21:55.235852 [DEBUG] Pagination (Cursor): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.235856 [DEBUG] Pagination (Cursor): Found next cursor: http://base.com/api/v1/stuff?page=2
2025/04/08 16:21:55.235867 [DEBUG] Pagination (Cursor URL): Set next request URL to: http://base.com/api/v1/stuff?page=2
2025/04/08 16:21:55.235874 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235877 [DEBUG] Pagination (Cursor): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.235879 [DEBUG] Pagination (Cursor): Found next cursor: /api/v1/stuff?page=3
2025/04/08 16:21:55.235883 [DEBUG] Pagination (Cursor URL): Set next request URL to: http://base.com/api/v1/stuff?page=3
2025/04/08 16:21:55.235888 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.235890 [DEBUG] Pagination (Cursor): Extracted 1 items on page 3 (index 2). Total so far: 3
2025/04/08 16:21:55.235892 [INFO]  Pagination (Cursor): No next cursor found. Stopping.
2025/04/08 16:21:55.235893 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleCursorPagination/Cursor_in_POST_Body
2025/04/08 16:21:55.235955 [INFO]  Pagination type 'cursor' detected. Starting pagination handling...
2025/04/08 16:21:55.235960 [DEBUG] Pagination: Automatically setting param_location to 'body' due to cursor_usage_mode 'body'
2025/04/08 16:21:55.235965 [DEBUG] Pagination (Cursor): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.235968 [DEBUG] Pagination (Cursor): Found next cursor: cursor1
2025/04/08 16:21:55.235998 [DEBUG] Pagination (Cursor Body): Updated body path 'pagingInfo' with param 'pageToken': {"pagingInfo":{"pageToken":"cursor1"},"query":"stuff"}
2025/04/08 16:21:55.236003 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236006 [DEBUG] Pagination (Cursor): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.236007 [DEBUG] Pagination (Cursor): Found next cursor: cursor2
2025/04/08 16:21:55.236049 [DEBUG] Pagination (Cursor Body): Updated body path 'pagingInfo' with param 'pageToken': {"pagingInfo":{"pageToken":"cursor2"},"query":"stuff"}
2025/04/08 16:21:55.236057 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236061 [DEBUG] Pagination (Cursor): Extracted 1 items on page 3 (index 2). Total so far: 3
2025/04/08 16:21:55.236064 [INFO]  Pagination (Cursor): No next cursor found. Stopping.
2025/04/08 16:21:55.236065 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleCursorPagination/Cursor_Error_on_Page_2
2025/04/08 16:21:55.236215 [INFO]  Pagination type 'cursor' detected. Starting pagination handling...
2025/04/08 16:21:55.236224 [DEBUG] Pagination (Cursor): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.236227 [DEBUG] Pagination (Cursor): Found next cursor: cursorA
2025/04/08 16:21:55.236230 [DEBUG] Pagination (Cursor Query): Set param 'cursor=cursorA'. New URL: http://test.com/data?cursor=cursorA
2025/04/08 16:21:55.236240 [INFO]  Attempt 1 failed: Get "http://test.com/data?cursor=cursorA": internal server error
2025/04/08 16:21:55.236245 [ERROR] Pagination (Cursor): Failed to fetch next page using cursor 'cursorA': request failed after 1 attempts: request failed: Get "http://test.com/data?cursor=cursorA": internal server error. Stopping.
2025/04/08 16:21:55.236247 [ERROR] Pagination failed: request failed after 1 attempts: request failed: Get "http://test.com/data?cursor=cursorA": internal server error. Returning collected data if any.
=== RUN   TestHandleCursorPagination/Cursor_Stop_by_MaxPages
2025/04/08 16:21:55.236289 [INFO]  Pagination type 'cursor' detected. Starting pagination handling...
2025/04/08 16:21:55.236295 [DEBUG] Pagination (Cursor): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.236297 [DEBUG] Pagination (Cursor): Found next cursor: c1
2025/04/08 16:21:55.236300 [DEBUG] Pagination (Cursor Query): Set param 'cursor=c1'. New URL: http://test.com/data?cursor=c1
2025/04/08 16:21:55.236307 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236309 [DEBUG] Pagination (Cursor): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.236324 [DEBUG] Pagination (Cursor): Found next cursor: c2
2025/04/08 16:21:55.236331 [DEBUG] Pagination (Cursor Query): Set param 'cursor=c2'. New URL: http://test.com/data?cursor=c2
2025/04/08 16:21:55.236345 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236348 [DEBUG] Pagination (Cursor): Extracted 1 items on page 3 (index 2). Total so far: 3
2025/04/08 16:21:55.236350 [DEBUG] Pagination (Cursor): Found next cursor: c3
2025/04/08 16:21:55.236351 [INFO]  Pagination (Cursor): Reached configured max_pages (3). Stopping.
2025/04/08 16:21:55.236353 [INFO]  Pagination finished. Returning merged results.
--- PASS: TestHandleCursorPagination (0.00s)
    --- PASS: TestHandleCursorPagination/Cursor_in_Body_Field,_Query_Usage (0.00s)
    --- PASS: TestHandleCursorPagination/Cursor_in_Header,_Query_Usage_Custom_Param (0.00s)
    --- PASS: TestHandleCursorPagination/Cursor_is_Full_URL (0.00s)
    --- PASS: TestHandleCursorPagination/Cursor_in_POST_Body (0.00s)
    --- PASS: TestHandleCursorPagination/Cursor_Error_on_Page_2 (0.00s)
    --- PASS: TestHandleCursorPagination/Cursor_Stop_by_MaxPages (0.00s)
=== RUN   TestHandleLinkHeaderPagination
2025/04/08 16:21:55.236549 [DEBUG] Log level set to 4
=== RUN   TestHandleLinkHeaderPagination/Simple_Link_Header
2025/04/08 16:21:55.236597 [INFO]  Pagination type 'link_header' detected. Starting pagination handling...
2025/04/08 16:21:55.236615 [DEBUG] Pagination (Link Header): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.236624 [DEBUG] Pagination (Link Header): Found next link URL: http://api.example.com/items?page=2
2025/04/08 16:21:55.236630 [DEBUG] Pagination (Link Header): Set next request URL to: http://api.example.com/items?page=2
2025/04/08 16:21:55.236634 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236636 [DEBUG] Pagination (Link Header): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.236639 [DEBUG] Pagination (Link Header): Found next link URL: http://api.example.com/items?page=3
2025/04/08 16:21:55.236641 [DEBUG] Pagination (Link Header): Set next request URL to: http://api.example.com/items?page=3
2025/04/08 16:21:55.236644 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236646 [DEBUG] Pagination (Link Header): Extracted 1 items on page 3 (index 2). Total so far: 3
2025/04/08 16:21:55.236647 [INFO]  Pagination (Link Header): No 'next' link found in headers. Stopping.
2025/04/08 16:21:55.236648 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleLinkHeaderPagination/Link_Header_with_Multiple_Links
2025/04/08 16:21:55.236688 [INFO]  Pagination type 'link_header' detected. Starting pagination handling...
2025/04/08 16:21:55.236696 [DEBUG] Pagination (Link Header): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.236701 [DEBUG] Pagination (Link Header): Found next link URL: http://api.example.com/data?p=2
2025/04/08 16:21:55.236706 [DEBUG] Pagination (Link Header): Set next request URL to: http://api.example.com/data?p=2
2025/04/08 16:21:55.236708 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236722 [DEBUG] Pagination (Link Header): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.236726 [INFO]  Pagination (Link Header): No 'next' link found in headers. Stopping.
2025/04/08 16:21:55.236728 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleLinkHeaderPagination/Link_Header_Relative_URL
2025/04/08 16:21:55.236768 [INFO]  Pagination type 'link_header' detected. Starting pagination handling...
2025/04/08 16:21:55.236777 [DEBUG] Pagination (Link Header): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.236783 [DEBUG] Pagination (Link Header): Found next link URL: /v2/records?cursor=abc
2025/04/08 16:21:55.236787 [DEBUG] Pagination (Link Header): Set next request URL to: http://api.example.com/v2/records?cursor=abc
2025/04/08 16:21:55.236790 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236793 [DEBUG] Pagination (Link Header): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.236794 [INFO]  Pagination (Link Header): No 'next' link found in headers. Stopping.
2025/04/08 16:21:55.236796 [INFO]  Pagination finished. Returning merged results.
=== RUN   TestHandleLinkHeaderPagination/Link_Header_Error_on_Page_2
2025/04/08 16:21:55.236838 [INFO]  Pagination type 'link_header' detected. Starting pagination handling...
2025/04/08 16:21:55.236846 [DEBUG] Pagination (Link Header): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.236851 [DEBUG] Pagination (Link Header): Found next link URL: http://api.example.com/items?page=2
2025/04/08 16:21:55.236853 [DEBUG] Pagination (Link Header): Set next request URL to: http://api.example.com/items?page=2
2025/04/08 16:21:55.236859 [INFO]  Attempt 1 failed: Get "http://api.example.com/items?page=2": access denied
2025/04/08 16:21:55.236872 [ERROR] Pagination (Link Header): Failed to fetch next page using link 'http://api.example.com/items?page=2': request failed after 1 attempts: request failed: Get "http://api.example.com/items?page=2": access denied. Stopping.
2025/04/08 16:21:55.236876 [ERROR] Pagination failed: request failed after 1 attempts: request failed: Get "http://api.example.com/items?page=2": access denied. Returning collected data if any.
=== RUN   TestHandleLinkHeaderPagination/Link_Header_Stop_By_MaxPages
2025/04/08 16:21:55.236918 [INFO]  Pagination type 'link_header' detected. Starting pagination handling...
2025/04/08 16:21:55.236924 [DEBUG] Pagination (Link Header): Extracted 1 items on page 1 (index 0). Total so far: 1
2025/04/08 16:21:55.236927 [DEBUG] Pagination (Link Header): Found next link URL: /items?page=2
2025/04/08 16:21:55.236930 [DEBUG] Pagination (Link Header): Set next request URL to: http://api.example.com/items?page=2
2025/04/08 16:21:55.236934 [DEBUG] Attempt 1 successful with status 200 or non-retryable error.
2025/04/08 16:21:55.236938 [DEBUG] Pagination (Link Header): Extracted 1 items on page 2 (index 1). Total so far: 2
2025/04/08 16:21:55.236940 [DEBUG] Pagination (Link Header): Found next link URL: /items?page=3
2025/04/08 16:21:55.236942 [INFO]  Pagination (Link Header): Reached configured max_pages (2). Stopping.
2025/04/08 16:21:55.236943 [INFO]  Pagination finished. Returning merged results.
--- PASS: TestHandleLinkHeaderPagination (0.00s)
    --- PASS: TestHandleLinkHeaderPagination/Simple_Link_Header (0.00s)
    --- PASS: TestHandleLinkHeaderPagination/Link_Header_with_Multiple_Links (0.00s)
    --- PASS: TestHandleLinkHeaderPagination/Link_Header_Relative_URL (0.00s)
    --- PASS: TestHandleLinkHeaderPagination/Link_Header_Error_on_Page_2 (0.00s)
    --- PASS: TestHandleLinkHeaderPagination/Link_Header_Stop_By_MaxPages (0.00s)
=== RUN   TestParseLinkHeader
=== RUN   TestParseLinkHeader/No_Link_Header
=== RUN   TestParseLinkHeader/Simple_Next_Link
=== RUN   TestParseLinkHeader/Multiple_Links_Including_Next
=== RUN   TestParseLinkHeader/Multiple_Link_Headers
=== RUN   TestParseLinkHeader/Link_with_different_rel_types_(should_ignore)
=== RUN   TestParseLinkHeader/No_next_link_present
=== RUN   TestParseLinkHeader/Link_with_quotes_around_rel
=== RUN   TestParseLinkHeader/Link_without_quotes_around_known_rel_(should_still_parse)
=== RUN   TestParseLinkHeader/Link_with_extra_spaces
=== RUN   TestParseLinkHeader/GitHub_style_link_header
--- PASS: TestParseLinkHeader (0.00s)
    --- PASS: TestParseLinkHeader/No_Link_Header (0.00s)
    --- PASS: TestParseLinkHeader/Simple_Next_Link (0.00s)
    --- PASS: TestParseLinkHeader/Multiple_Links_Including_Next (0.00s)
    --- PASS: TestParseLinkHeader/Multiple_Link_Headers (0.00s)
    --- PASS: TestParseLinkHeader/Link_with_different_rel_types_(should_ignore) (0.00s)
    --- PASS: TestParseLinkHeader/No_next_link_present (0.00s)
    --- PASS: TestParseLinkHeader/Link_with_quotes_around_rel (0.00s)
    --- PASS: TestParseLinkHeader/Link_without_quotes_around_known_rel_(should_still_parse) (0.00s)
    --- PASS: TestParseLinkHeader/Link_with_extra_spaces (0.00s)
    --- PASS: TestParseLinkHeader/GitHub_style_link_header (0.00s)
=== RUN   TestMakeAbsoluteURL
=== RUN   TestMakeAbsoluteURL/Absolute_Next_URL
=== RUN   TestMakeAbsoluteURL/Relative_Path_Next_URL
=== RUN   TestMakeAbsoluteURL/Relative_Path_Parent_Dir
=== RUN   TestMakeAbsoluteURL/Root_Relative_Path
=== RUN   TestMakeAbsoluteURL/Empty_Next_URL
=== RUN   TestMakeAbsoluteURL/Invalid_Next_URL_Syntax
=== RUN   TestMakeAbsoluteURL/Base_URL_with_Path
=== RUN   TestMakeAbsoluteURL/Base_URL_ends_no_slash
=== RUN   TestMakeAbsoluteURL/Nil_Base_URL
=== RUN   TestMakeAbsoluteURL/Nil_Base_URL,_Absolute_Next
--- PASS: TestMakeAbsoluteURL (0.00s)
    --- PASS: TestMakeAbsoluteURL/Absolute_Next_URL (0.00s)
    --- PASS: TestMakeAbsoluteURL/Relative_Path_Next_URL (0.00s)
    --- PASS: TestMakeAbsoluteURL/Relative_Path_Parent_Dir (0.00s)
    --- PASS: TestMakeAbsoluteURL/Root_Relative_Path (0.00s)
    --- PASS: TestMakeAbsoluteURL/Empty_Next_URL (0.00s)
    --- PASS: TestMakeAbsoluteURL/Invalid_Next_URL_Syntax (0.00s)
    --- PASS: TestMakeAbsoluteURL/Base_URL_with_Path (0.00s)
    --- PASS: TestMakeAbsoluteURL/Base_URL_ends_no_slash (0.00s)
    --- PASS: TestMakeAbsoluteURL/Nil_Base_URL (0.00s)
    --- PASS: TestMakeAbsoluteURL/Nil_Base_URL,_Absolute_Next (0.00s)
=== RUN   TestFindOrCreateTargetPath
2025/04/08 16:21:55.237585 [DEBUG] Log level set to 4
=== RUN   TestFindOrCreateTargetPath/Empty_Path
=== RUN   TestFindOrCreateTargetPath/Simple_Path_Exists_-_Get_Target
=== RUN   TestFindOrCreateTargetPath/Create_Simple_Path
=== RUN   TestFindOrCreateTargetPath/Create_Nested_Path
=== RUN   TestFindOrCreateTargetPath/Path_Collides_with_Non-Map_(Intermediate)
=== RUN   TestFindOrCreateTargetPath/Path_Collides_with_Non-Map_(Final)
=== RUN   TestFindOrCreateTargetPath/Invalid_Path_-_Starts_with_Dot
=== RUN   TestFindOrCreateTargetPath/Invalid_Path_-_Ends_with_Dot
=== RUN   TestFindOrCreateTargetPath/Invalid_Path_-_Double_Dot
=== RUN   TestFindOrCreateTargetPath/Invalid_Path_-_Just_a_Dot
--- PASS: TestFindOrCreateTargetPath (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Empty_Path (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Simple_Path_Exists_-_Get_Target (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Create_Simple_Path (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Create_Nested_Path (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Path_Collides_with_Non-Map_(Intermediate) (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Path_Collides_with_Non-Map_(Final) (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Invalid_Path_-_Starts_with_Dot (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Invalid_Path_-_Ends_with_Dot (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Invalid_Path_-_Double_Dot (0.00s)
    --- PASS: TestFindOrCreateTargetPath/Invalid_Path_-_Just_a_Dot (0.00s)
=== RUN   TestModifyRequestForInitialPage
2025/04/08 16:21:55.238046 [DEBUG] Log level set to 4
=== RUN   TestModifyRequestForInitialPage/Offset_Type_-_Query_Params
2025/04/08 16:21:55.238065 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/items?limit=10&offset=0&other=val
=== RUN   TestModifyRequestForInitialPage/Page_Type_-_Query_Params
2025/04/08 16:21:55.238077 [DEBUG] Pagination (Query): Constructed next URL: http://test.com/data?p=1&s=5
=== RUN   TestModifyRequestForInitialPage/Offset_Type_-_Body_Params_-_No_Existing_Body
2025/04/08 16:21:55.238090 [DEBUG] Pagination (Body): Updated body for path 'params': {"params":{"lim":20,"off":0}}
=== RUN   TestModifyRequestForInitialPage/Page_Type_-_Body_Params_-_Merge_with_Existing_Body
2025/04/08 16:21:55.238135 [DEBUG] Pagination (Body): Updated body for path '': {"filter":"active","page_num":2,"page_size":15,"sort":"name"}
=== RUN   TestModifyRequestForInitialPage/Invalid_Type_(Cursor)
=== RUN   TestModifyRequestForInitialPage/Body_Params_-_Invalid_Body_JSON
=== RUN   TestModifyRequestForInitialPage/Body_Params_-_Invalid_BodyPath
--- PASS: TestModifyRequestForInitialPage (0.00s)
    --- PASS: TestModifyRequestForInitialPage/Offset_Type_-_Query_Params (0.00s)
    --- PASS: TestModifyRequestForInitialPage/Page_Type_-_Query_Params (0.00s)
    --- PASS: TestModifyRequestForInitialPage/Offset_Type_-_Body_Params_-_No_Existing_Body (0.00s)
    --- PASS: TestModifyRequestForInitialPage/Page_Type_-_Body_Params_-_Merge_with_Existing_Body (0.00s)
    --- PASS: TestModifyRequestForInitialPage/Invalid_Type_(Cursor) (0.00s)
    --- PASS: TestModifyRequestForInitialPage/Body_Params_-_Invalid_Body_JSON (0.00s)
    --- PASS: TestModifyRequestForInitialPage/Body_Params_-_Invalid_BodyPath (0.00s)
PASS
ok  	api-tool/internal/executor	0.910s
=== RUN   TestNewClient
=== RUN   TestNewClient/Defaults_(No_Auth,_No_Skip,_No_Jar,_FIPS_off)
=== RUN   TestNewClient/TLS_Skip_Verify_Enabled
2025/04/08 16:21:55.080154 [INFO]  TLS certificate verification is DISABLED for API base URL: http://test.com
=== RUN   TestNewClient/Cookie_Jar_Enabled_(Temporary)
=== RUN   TestNewClient/Cookie_Jar_Enabled_(Persistent)
=== RUN   TestNewClient/Auth_Override_API_(Basic)
=== RUN   TestNewClient/Auth_Global_Default_(Bearer)
=== RUN   TestNewClient/NTLM_Auth
=== RUN   TestNewClient/NTLM_Auth_Missing_Creds
=== RUN   TestNewClient/OAuth2_Auth
=== RUN   TestNewClient/OAuth2_Auth_With_Cookie_Jar
=== RUN   TestNewClient/OAuth2_Auth_Missing_Creds
=== RUN   TestNewClient/Digest_Auth_(FIPS_Off)
=== RUN   TestNewClient/Digest_Auth_(FIPS_On)
2025/04/08 16:21:55.080682 [INFO]  FIPS Mode is ENABLED. Non-FIPS algorithms (e.g., MD5 Digest) will be disallowed.
=== RUN   TestNewClient/Unsupported_Auth
=== RUN   TestNewClient/API_Specific_Timeout
=== RUN   TestNewClient/API_Specific_Timeout_with_OAuth2
--- PASS: TestNewClient (0.00s)
    --- PASS: TestNewClient/Defaults_(No_Auth,_No_Skip,_No_Jar,_FIPS_off) (0.00s)
    --- PASS: TestNewClient/TLS_Skip_Verify_Enabled (0.00s)
    --- PASS: TestNewClient/Cookie_Jar_Enabled_(Temporary) (0.00s)
    --- PASS: TestNewClient/Cookie_Jar_Enabled_(Persistent) (0.00s)
    --- PASS: TestNewClient/Auth_Override_API_(Basic) (0.00s)
    --- PASS: TestNewClient/Auth_Global_Default_(Bearer) (0.00s)
    --- PASS: TestNewClient/NTLM_Auth (0.00s)
    --- PASS: TestNewClient/NTLM_Auth_Missing_Creds (0.00s)
    --- PASS: TestNewClient/OAuth2_Auth (0.00s)
    --- PASS: TestNewClient/OAuth2_Auth_With_Cookie_Jar (0.00s)
    --- PASS: TestNewClient/OAuth2_Auth_Missing_Creds (0.00s)
    --- PASS: TestNewClient/Digest_Auth_(FIPS_Off) (0.00s)
    --- PASS: TestNewClient/Digest_Auth_(FIPS_On) (0.00s)
    --- PASS: TestNewClient/Unsupported_Auth (0.00s)
    --- PASS: TestNewClient/API_Specific_Timeout (0.00s)
    --- PASS: TestNewClient/API_Specific_Timeout_with_OAuth2 (0.00s)
=== RUN   TestLogCookieJar
2025/04/08 16:21:55.080857 [DEBUG] Log level set to 4
2025/04/08 16:21:55.080884 [DEBUG] Cookies in jar for URL 'http://test.com': [session=123]
2025/04/08 16:21:55.080893 [DEBUG] Error parsing URL ':invalid-url:' for logging cookie jar: parse ":invalid-url:": missing protocol scheme
2025/04/08 16:21:55.080898 [DEBUG] No cookies in jar for URL 'http://other.com'
--- PASS: TestLogCookieJar (0.00s)
PASS
ok  	api-tool/internal/httpclient	0.753s
=== RUN   TestRunFilter
=== RUN   TestRunFilter/Valid_Filter_and_Input
=== RUN   TestRunFilter/Valid_Filter_-_Raw_Output_Number
=== RUN   TestRunFilter/Valid_Filter_-_Complex_Output_JSON
=== RUN   TestRunFilter/JQ_Not_Found
=== RUN   TestRunFilter/JQ_Execution_Error_(bad_filter)
=== RUN   TestRunFilter/JQ_Error_on_Invalid_Input_JSON
=== RUN   TestRunFilter/Empty_Input
=== RUN   TestRunFilter/Empty_Filter
=== RUN   TestRunFilter/Successful_run_with_stderr_warning
--- PASS: TestRunFilter (0.00s)
    --- PASS: TestRunFilter/Valid_Filter_and_Input (0.00s)
    --- PASS: TestRunFilter/Valid_Filter_-_Raw_Output_Number (0.00s)
    --- PASS: TestRunFilter/Valid_Filter_-_Complex_Output_JSON (0.00s)
    --- PASS: TestRunFilter/JQ_Not_Found (0.00s)
    --- PASS: TestRunFilter/JQ_Execution_Error_(bad_filter) (0.00s)
    --- PASS: TestRunFilter/JQ_Error_on_Invalid_Input_JSON (0.00s)
    --- PASS: TestRunFilter/Empty_Input (0.00s)
    --- PASS: TestRunFilter/Empty_Filter (0.00s)
    --- PASS: TestRunFilter/Successful_run_with_stderr_warning (0.00s)
PASS
ok  	api-tool/internal/jq	1.037s
=== RUN   TestParseLevel
=== RUN   TestParseLevel/none
=== RUN   TestParseLevel/NONE
=== RUN   TestParseLevel/error
=== RUN   TestParseLevel/ERROR
=== RUN   TestParseLevel/warn
=== RUN   TestParseLevel/WARN
=== RUN   TestParseLevel/warning
=== RUN   TestParseLevel/WARNING
=== RUN   TestParseLevel/info
=== RUN   TestParseLevel/INFO
=== RUN   TestParseLevel/debug
=== RUN   TestParseLevel/DEBUG
=== RUN   TestParseLevel/#00
=== RUN   TestParseLevel/invalid
=== RUN   TestParseLevel/information
--- PASS: TestParseLevel (0.00s)
    --- PASS: TestParseLevel/none (0.00s)
    --- PASS: TestParseLevel/NONE (0.00s)
    --- PASS: TestParseLevel/error (0.00s)
    --- PASS: TestParseLevel/ERROR (0.00s)
    --- PASS: TestParseLevel/warn (0.00s)
    --- PASS: TestParseLevel/WARN (0.00s)
    --- PASS: TestParseLevel/warning (0.00s)
    --- PASS: TestParseLevel/WARNING (0.00s)
    --- PASS: TestParseLevel/info (0.00s)
    --- PASS: TestParseLevel/INFO (0.00s)
    --- PASS: TestParseLevel/debug (0.00s)
    --- PASS: TestParseLevel/DEBUG (0.00s)
    --- PASS: TestParseLevel/#00 (0.00s)
    --- PASS: TestParseLevel/invalid (0.00s)
    --- PASS: TestParseLevel/information (0.00s)
=== RUN   TestSetGetLevel
=== RUN   TestSetGetLevel/Level_0
=== RUN   TestSetGetLevel/Level_1
=== RUN   TestSetGetLevel/Level_2
=== RUN   TestSetGetLevel/Level_3
=== RUN   TestSetGetLevel/Level_4
2025/04/08 16:21:55.500168 [DEBUG] Log level set to 4
--- PASS: TestSetGetLevel (0.00s)
    --- PASS: TestSetGetLevel/Level_0 (0.00s)
    --- PASS: TestSetGetLevel/Level_1 (0.00s)
    --- PASS: TestSetGetLevel/Level_2 (0.00s)
    --- PASS: TestSetGetLevel/Level_3 (0.00s)
    --- PASS: TestSetGetLevel/Level_4 (0.00s)
=== RUN   TestSetupLogging
=== RUN   TestSetupLogging/debug
=== RUN   TestSetupLogging/info
=== RUN   TestSetupLogging/warn
=== RUN   TestSetupLogging/error
=== RUN   TestSetupLogging/none
=== RUN   TestSetupLogging/invalid-level
--- PASS: TestSetupLogging (0.00s)
    --- PASS: TestSetupLogging/debug (0.00s)
    --- PASS: TestSetupLogging/info (0.00s)
    --- PASS: TestSetupLogging/warn (0.00s)
    --- PASS: TestSetupLogging/error (0.00s)
    --- PASS: TestSetupLogging/none (0.00s)
    --- PASS: TestSetupLogging/invalid-level (0.00s)
=== RUN   TestLogfOutput
=== RUN   TestLogfOutput/DebugAtDebug
2025/04/08 16:21:55.500586 [DEBUG] Log level set to 4
=== RUN   TestLogfOutput/InfoAtDebug
2025/04/08 16:21:55.500620 [DEBUG] Log level set to 4
=== RUN   TestLogfOutput/WarnAtDebug
2025/04/08 16:21:55.500650 [DEBUG] Log level set to 4
=== RUN   TestLogfOutput/ErrorAtDebug
2025/04/08 16:21:55.500672 [DEBUG] Log level set to 4
=== RUN   TestLogfOutput/InfoAtInfo
=== RUN   TestLogfOutput/DebugAtInfo
=== RUN   TestLogfOutput/WarnAtInfo
=== RUN   TestLogfOutput/ErrorAtInfo
=== RUN   TestLogfOutput/ErrorAtWarning
=== RUN   TestLogfOutput/WarnAtWarning
=== RUN   TestLogfOutput/InfoAtWarning
=== RUN   TestLogfOutput/ErrorAtError
=== RUN   TestLogfOutput/WarnAtError
=== RUN   TestLogfOutput/AnythingAtNone
=== RUN   TestLogfOutput/ErrorAtNone
--- PASS: TestLogfOutput (0.00s)
    --- PASS: TestLogfOutput/DebugAtDebug (0.00s)
    --- PASS: TestLogfOutput/InfoAtDebug (0.00s)
    --- PASS: TestLogfOutput/WarnAtDebug (0.00s)
    --- PASS: TestLogfOutput/ErrorAtDebug (0.00s)
    --- PASS: TestLogfOutput/InfoAtInfo (0.00s)
    --- PASS: TestLogfOutput/DebugAtInfo (0.00s)
    --- PASS: TestLogfOutput/WarnAtInfo (0.00s)
    --- PASS: TestLogfOutput/ErrorAtInfo (0.00s)
    --- PASS: TestLogfOutput/ErrorAtWarning (0.00s)
    --- PASS: TestLogfOutput/WarnAtWarning (0.00s)
    --- PASS: TestLogfOutput/InfoAtWarning (0.00s)
    --- PASS: TestLogfOutput/ErrorAtError (0.00s)
    --- PASS: TestLogfOutput/WarnAtError (0.00s)
    --- PASS: TestLogfOutput/AnythingAtNone (0.00s)
    --- PASS: TestLogfOutput/ErrorAtNone (0.00s)
PASS
ok  	api-tool/internal/logging	1.132s
=== RUN   TestTextTemplateMissingKeyErrorOption
--- PASS: TestTextTemplateMissingKeyErrorOption (0.00s)
=== RUN   TestRender
=== RUN   TestRender/Simple_Substitution
=== RUN   TestRender/Multiple_Substitutions
=== RUN   TestRender/Empty_Template_String
=== RUN   TestRender/Nil_Data
=== RUN   TestRender/Empty_Data_Map
=== RUN   TestRender/Missing_Key_in_Data
=== RUN   TestRender/Invalid_Template_Syntax
=== RUN   TestRender/Substitute_Empty_Value
=== RUN   TestRender/Template_with_No_Substitutions
=== RUN   TestRender/Substitute_String_Containing_Template_Syntax
--- PASS: TestRender (0.00s)
    --- PASS: TestRender/Simple_Substitution (0.00s)
    --- PASS: TestRender/Multiple_Substitutions (0.00s)
    --- PASS: TestRender/Empty_Template_String (0.00s)
    --- PASS: TestRender/Nil_Data (0.00s)
    --- PASS: TestRender/Empty_Data_Map (0.00s)
    --- PASS: TestRender/Missing_Key_in_Data (0.00s)
    --- PASS: TestRender/Invalid_Template_Syntax (0.00s)
    --- PASS: TestRender/Substitute_Empty_Value (0.00s)
    --- PASS: TestRender/Template_with_No_Substitutions (0.00s)
    --- PASS: TestRender/Substitute_String_Containing_Template_Syntax (0.00s)
PASS
ok  	api-tool/internal/template	1.081s
=== RUN   TestExpandEnvUniversal
=== RUN   TestExpandEnvUniversal/No_Vars
=== RUN   TestExpandEnvUniversal/Unix_Var_Simple
=== RUN   TestExpandEnvUniversal/Unix_Var_Brace
=== RUN   TestExpandEnvUniversal/Windows_Var
=== RUN   TestExpandEnvUniversal/Mixed_Vars
=== RUN   TestExpandEnvUniversal/Undefined_Unix_Var
=== RUN   TestExpandEnvUniversal/Undefined_Windows_Var
=== RUN   TestExpandEnvUniversal/Mixed_Defined/Undefined
=== RUN   TestExpandEnvUniversal/Adjacent_Vars
=== RUN   TestExpandEnvUniversal/Empty_Input
=== RUN   TestExpandEnvUniversal/Only_Delimiters
=== RUN   TestExpandEnvUniversal/Incomplete_Unix
=== RUN   TestExpandEnvUniversal/Incomplete_Windows
=== RUN   TestExpandEnvUniversal/Percent_Sign_Not_Var
=== RUN   TestExpandEnvUniversal/Dollar_Sign_Not_Var
--- PASS: TestExpandEnvUniversal (0.00s)
    --- PASS: TestExpandEnvUniversal/No_Vars (0.00s)
    --- PASS: TestExpandEnvUniversal/Unix_Var_Simple (0.00s)
    --- PASS: TestExpandEnvUniversal/Unix_Var_Brace (0.00s)
    --- PASS: TestExpandEnvUniversal/Windows_Var (0.00s)
    --- PASS: TestExpandEnvUniversal/Mixed_Vars (0.00s)
    --- PASS: TestExpandEnvUniversal/Undefined_Unix_Var (0.00s)
    --- PASS: TestExpandEnvUniversal/Undefined_Windows_Var (0.00s)
    --- PASS: TestExpandEnvUniversal/Mixed_Defined/Undefined (0.00s)
    --- PASS: TestExpandEnvUniversal/Adjacent_Vars (0.00s)
    --- PASS: TestExpandEnvUniversal/Empty_Input (0.00s)
    --- PASS: TestExpandEnvUniversal/Only_Delimiters (0.00s)
    --- PASS: TestExpandEnvUniversal/Incomplete_Unix (0.00s)
    --- PASS: TestExpandEnvUniversal/Incomplete_Windows (0.00s)
    --- PASS: TestExpandEnvUniversal/Percent_Sign_Not_Var (0.00s)
    --- PASS: TestExpandEnvUniversal/Dollar_Sign_Not_Var (0.00s)
=== RUN   TestSnippet
=== RUN   TestSnippet/Nil_input
=== RUN   TestSnippet/Empty_input
=== RUN   TestSnippet/Short_input
=== RUN   TestSnippet/Exact_max_length
=== RUN   TestSnippet/Long_input
=== RUN   TestSnippet/Long_Unicode_Safe
=== RUN   TestSnippet/Exact_Unicode_Safe
=== RUN   TestSnippet/Over_Unicode_Safe
--- PASS: TestSnippet (0.00s)
    --- PASS: TestSnippet/Nil_input (0.00s)
    --- PASS: TestSnippet/Empty_input (0.00s)
    --- PASS: TestSnippet/Short_input (0.00s)
    --- PASS: TestSnippet/Exact_max_length (0.00s)
    --- PASS: TestSnippet/Long_input (0.00s)
    --- PASS: TestSnippet/Long_Unicode_Safe (0.00s)
    --- PASS: TestSnippet/Exact_Unicode_Safe (0.00s)
    --- PASS: TestSnippet/Over_Unicode_Safe (0.00s)
=== RUN   TestLooksLikeJSON
=== RUN   TestLooksLikeJSON/Empty_String
=== RUN   TestLooksLikeJSON/Simple_Object
=== RUN   TestLooksLikeJSON/Simple_Array
=== RUN   TestLooksLikeJSON/Object_with_Whitespace
=== RUN   TestLooksLikeJSON/Array_with_Whitespace
=== RUN   TestLooksLikeJSON/Just_Braces
=== RUN   TestLooksLikeJSON/Just_Brackets
=== RUN   TestLooksLikeJSON/Incomplete_Object
=== RUN   TestLooksLikeJSON/Incomplete_Array
=== RUN   TestLooksLikeJSON/Plain_String
=== RUN   TestLooksLikeJSON/Number_String
=== RUN   TestLooksLikeJSON/Boolean_String
=== RUN   TestLooksLikeJSON/XML_String
=== RUN   TestLooksLikeJSON/Only_Whitespace
=== RUN   TestLooksLikeJSON/Object_Incorrect_Brackets
=== RUN   TestLooksLikeJSON/Array_Incorrect_Braces
--- PASS: TestLooksLikeJSON (0.00s)
    --- PASS: TestLooksLikeJSON/Empty_String (0.00s)
    --- PASS: TestLooksLikeJSON/Simple_Object (0.00s)
    --- PASS: TestLooksLikeJSON/Simple_Array (0.00s)
    --- PASS: TestLooksLikeJSON/Object_with_Whitespace (0.00s)
    --- PASS: TestLooksLikeJSON/Array_with_Whitespace (0.00s)
    --- PASS: TestLooksLikeJSON/Just_Braces (0.00s)
    --- PASS: TestLooksLikeJSON/Just_Brackets (0.00s)
    --- PASS: TestLooksLikeJSON/Incomplete_Object (0.00s)
    --- PASS: TestLooksLikeJSON/Incomplete_Array (0.00s)
    --- PASS: TestLooksLikeJSON/Plain_String (0.00s)
    --- PASS: TestLooksLikeJSON/Number_String (0.00s)
    --- PASS: TestLooksLikeJSON/Boolean_String (0.00s)
    --- PASS: TestLooksLikeJSON/XML_String (0.00s)
    --- PASS: TestLooksLikeJSON/Only_Whitespace (0.00s)
    --- PASS: TestLooksLikeJSON/Object_Incorrect_Brackets (0.00s)
    --- PASS: TestLooksLikeJSON/Array_Incorrect_Braces (0.00s)
PASS
ok  	api-tool/internal/util	1.177s
